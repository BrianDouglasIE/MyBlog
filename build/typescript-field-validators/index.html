<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <!-- Meta Description -->
    <meta name="description" content="Object field validators in Typescript"/>

    <!-- Keywords -->
    <meta name="keywords" content="Brian Douglas, blog, js"/>

    <!-- Author -->
    <meta name="author" content="Brian Douglas"/>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="BrianDouglas.ie - Object field validators in Typescript"/>
    <meta property="og:description" content="Object field validators in Typescript"/>
    <meta property="og:url" content="https://www.briandouglas.ie"/>
    <meta property="og:image" content="http://www.briandouglas.ie/images/og-images/typescript-field-validators.png"/>
    <meta property="og:image:type" content="image/png"/>
    <meta property="og:image:width" content="1280"/>
    <meta property="og:image:height" content="640"/>
    <meta property="og:site_name" content="BrianDouglas.ie"/>
    <meta property="og:image:alt" content="A preview image for the post titled 'Object field validators in Typescript'"/>

    <!-- Twitter Meta -->
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@BrianDouglasIE"/>
    <meta name="twitter:title" content="BrianDouglas.ie - Object field validators in Typescript"/>
    <meta name="twitter:description" content="Object field validators in Typescript"/>
    <meta name="twitter:image" content="http://www.briandouglas.ie/images/og-images/typescript-field-validators.png"/>

    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.briandouglas.ie"/>

    <!-- Favicon (Optional) -->
    <link rel="icon" href="https://www.briandouglas.ie/favicon.ico" type="image/x-icon"/>

    <!-- Robots -->
    <meta name="robots" content="index, follow"/>

    <!-- Favicon-->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/site.webmanifest"/>

    <title>Object field validators in Typescript</title>
    <link rel="stylesheet" href="/styles.css">
    <style>
pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#24292e;background:#ffffff}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#d73a49}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#6f42c1}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#005cc5}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#032f62}.hljs-built_in,.hljs-symbol{color:#e36209}.hljs-code,.hljs-comment,.hljs-formula{color:#6a737d}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#22863a}.hljs-subst{color:#24292e}.hljs-section{color:#005cc5;font-weight:bold}.hljs-bullet{color:#735c0f}.hljs-emphasis{color:#24292e;font-style:italic}.hljs-strong{color:#24292e;font-weight:bold}.hljs-addition{color:#22863a;background-color:#f0fff4}.hljs-deletion{color:#b31d28;background-color:#ffeef0}.hljs-char.escape_,.hljs-link,.hljs-params,.hljs-property,.hljs-punctuation,.hljs-tag{}
    </style>
</head>
<body>

<div class="content">
    <header class="site-header">
    <a href="/" class="home">Brian Douglas</a>

    <div class="svg-container">
        <a href="https://github.com/BrianDouglasIE" class="github">
            <svg
                height="32"
                aria-hidden="true"
                viewBox="0 0 24 24"
                width="32"
                data-view-component="true"
            >
                <path
                    d="M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547C20.709 21.637 24 17.324 24 12.25 24 5.896 18.854.75 12.5.75Z"
                ></path>
            </svg>
        </a>

        <a
            href="https://linkedin.com/in/brian-douglas-90abb93ab"
            class="linkedin"
        >
            <svg
                viewBox="0 0 128 128"
                height="32"
                aria-hidden="true"
                width="32"
                data-view-component="true"
            >
                <path
                    d="M116 3H12a8.91 8.91 0 00-9 8.8v104.42a8.91 8.91 0 009 8.78h104a8.93 8.93 0 009-8.81V11.77A8.93 8.93 0 00116 3zM39.17 107H21.06V48.73h18.11zm-9-66.21a10.5 10.5 0 1110.49-10.5 10.5 10.5 0 01-10.54 10.48zM107 107H88.89V78.65c0-6.75-.12-15.44-9.41-15.44s-10.87 7.36-10.87 15V107H50.53V48.73h17.36v8h.24c2.42-4.58 8.32-9.41 17.13-9.41C103.6 47.28 107 59.35 107 75z"
                ></path>
            </svg>
        </a>
    </div>
</header>

    <div class="breadcrumbs">
        <a href="/">Home</a> / <span>Object field validators in Typescript</span>
    </div>

    <main>
        <article class="post">
            <header>
                <h1>Object field validators in Typescript</h1>
                <time datetime="08/08/2025">August 8th, 2025</time>
            </header>

            <div class="body">
                <p>Before you pull in the next hot new validation library. Ask yourself this question. Do I need it?
The answer is no, field validation is quite easy. Let me show you how to create an extensible
object field validator. </p>
<!-- more -->
<h2 id="whatsanobjectfieldvalidator">Whats an object field validator?</h2>
<p>Ok, so let's work with the following scenario. You have a user registration form. It's represented
in your code as the following type.</p>
<pre class="typescript language-typescript"><code class="hljs typescript language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserForm</span> = { <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span> }
</code></pre>
<p>Typescript will ensure that you get an error message when you try to assign a <code>number</code> instead of
a <code>string</code> for the email field. But this object represents form data, aka user input. So it could
be anything. We should validate that it matches our criteria. For example the email should be of a
valid email format, and the password should be no less that 8 characters in length.</p>
<p>This where an <em>object field validator</em> comes into play. It takes an object and applies the given 
validators to the object fields. Telling us that, <em>yes this user form contains a valid email address</em> 
etcâ€¦</p>
<h2 id="usage">Usage</h2>
<p>Let's start by defining how we want to use it. I'd like to make a composable validator. This would be
a function that takes a generic type and produces a validator for that type. The type in question is
the above <code>UserForm</code>. The method used to compose the validator should take an object that contains a
list of field validators for each of the <code>UserForm</code> fields. These <em>field validators</em> should themselves
be composable methods.</p>
<p>When the composed validator is called with our <code>UserForm</code> instance, it should return an object representing
any errors that were found.</p>
<p>The end result should be a clean api for creating <em>object field validators</em>. To me the below example is perfect.</p>
<pre class="typescript language-typescript"><code class="hljs typescript language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserForm</span> = { <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span> }

<span class="hljs-keyword">const</span> userFormValidator = createFieldValidator&lt;<span class="hljs-title class_">UserForm</span>&gt;({
  <span class="hljs-attr">email</span>: [stringValidators.<span class="hljs-title function_">email</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${email}</span> is not a valid email address`</span>)],
  <span class="hljs-attr">password</span>: [
    stringValidators.<span class="hljs-title function_">min</span>(<span class="hljs-number">8</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-string">`Password must be greater than 8 characters in length`</span>),
    stringValidators.<span class="hljs-title function_">max</span>(<span class="hljs-number">250</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-string">`Password must be less than 8 characters in length`</span>),
  ]
})

<span class="hljs-keyword">const</span> validated = <span class="hljs-title function_">userFormValidator</span>({ <span class="hljs-attr">email</span>: <span class="hljs-string">&#x27;not an email&#x27;</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;2 short&#x27;</span> })
</code></pre>
<p>The <code>validated</code> variable above will hold the following value.</p>
<pre><code class="hljs">{
  <span class="hljs-params">input:</span> {
    <span class="hljs-params">email:</span> <span class="hljs-string">&quot;not an email&quot;</span>,
    <span class="hljs-params">password:</span> <span class="hljs-string">&quot;2 short&quot;</span>,
  },
  <span class="hljs-params">errors:</span> {
    <span class="hljs-params">email:</span> [ <span class="hljs-string">&quot;&#x27;not an email&#x27; is not a valid email address&quot;</span> ],
    <span class="hljs-params">password:</span> [ <span class="hljs-string">&quot;Password must be at least 8 characters long&quot;</span> ],
  },
  <span class="hljs-params">hasErrors:</span> <span class="hljs-literal">true</span>,
}
</code></pre>
<p>This makes it easy to check if there are errors present, using the <code>hasErrors</code> field, and then access a list
of error messages for each field.</p>
<h2 id="implementation">Implementation</h2>
<p>I'd like to believe that you are a top programmer and just want to see the code, without me trying to clumsly explain it.
The code doesn't tell lies, I do. So here is the code.</p>
<p><chicken-asks>Why did he need to add <code>&lt;T extends Object&gt;</code>?</chicken-asks>
<magpie-replies>Well <code>Object.entries</code> needs to take an <code>Object</code> or an <code>ArrayLike</code> entity. So it was just to tell the type checker that <code>T</code> is some sort of <code>Object</code>.</magpie-replies></p>
<pre class="typescript language-typescript"><code class="hljs typescript language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ErrorMap</span> = { [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span>[] }
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ErrorMessageCallback</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">string</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ValidatorMap</span> = { [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-title class_">Function</span>[] }
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Validated</span>&lt;T&gt; = { <span class="hljs-attr">input</span>: T, <span class="hljs-attr">errors</span>: <span class="hljs-title class_">ErrorMap</span>, <span class="hljs-attr">hasErrors</span>: <span class="hljs-built_in">boolean</span> }

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createFieldValidator = &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Object</span>&gt;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">validators</span>: <span class="hljs-title class_">ValidatorMap</span></span>) =&gt;</span> (<span class="hljs-attr">input</span>: T): <span class="hljs-title class_">Validated</span>&lt;T&gt; =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">errors</span>: <span class="hljs-title class_">ErrorMap</span> = {}
  <span class="hljs-keyword">let</span> hasErrors = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(input)) {
    <span class="hljs-keyword">if</span> (validators[key]) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> validator <span class="hljs-keyword">of</span> validators[key]) {
        <span class="hljs-keyword">const</span> error = <span class="hljs-title function_">validator</span>(value)
        <span class="hljs-keyword">if</span> (error) {
          hasErrors = <span class="hljs-literal">true</span>
          <span class="hljs-keyword">if</span> (errors[key]) {
            errors[key].<span class="hljs-title function_">push</span>(error)
          } <span class="hljs-keyword">else</span> {
            errors[key] = [error]
          }
        }
      }
    }
  }

  <span class="hljs-keyword">return</span> { input, errors, hasErrors }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> stringValidators = {
  <span class="hljs-attr">isString</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">msg</span>?: <span class="hljs-title class_">ErrorMessageCallback</span></span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">typeof</span> input == <span class="hljs-string">&#x27;string&#x27;</span>)) <span class="hljs-keyword">return</span> msg ? <span class="hljs-title function_">msg</span>(input) : <span class="hljs-string">&#x27;Not a string&#x27;</span>
  },
  <span class="hljs-attr">min</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">n</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">msg</span>?: <span class="hljs-title class_">ErrorMessageCallback</span></span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (input.<span class="hljs-property">length</span> &lt; n) <span class="hljs-keyword">return</span> msg ? <span class="hljs-title function_">msg</span>(input) : <span class="hljs-string">`Must be greater than <span class="hljs-subst">${n}</span> characters in length`</span>
  },
  <span class="hljs-attr">max</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">n</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">msg</span>?: <span class="hljs-title class_">ErrorMessageCallback</span></span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (input.<span class="hljs-property">length</span> &gt; n) <span class="hljs-keyword">return</span> msg ? <span class="hljs-title function_">msg</span>(input) : <span class="hljs-string">`Must be less than <span class="hljs-subst">${n}</span> characters in length`</span>
  },
  <span class="hljs-attr">email</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">msg</span>?: <span class="hljs-title class_">ErrorMessageCallback</span></span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> emailRe = <span class="hljs-regexp">/^(([^&lt;&gt;()[\]\\.,;:\s@&quot;]+(\.[^&lt;&gt;()[\]\\.,;:\s@&quot;]+)*)|.(&quot;.+&quot;))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/</span>
    <span class="hljs-keyword">if</span> (!emailRe.<span class="hljs-title function_">test</span>(input.<span class="hljs-title function_">toLowerCase</span>())) <span class="hljs-keyword">return</span> msg ? <span class="hljs-title function_">msg</span>(input) : <span class="hljs-string">&#x27;Not a valid email address&#x27;</span>
  }
}
</code></pre>
            </div>

            <footer>
                <p><i>Until next time,</i></p>
                <p><i>Brian</i></p>
            </footer>
        </article>
    </main>

    <footer class="site-footer">
    <p>
        <small>Since August 4th, 2023. All words by Brian
            Douglas. <a href="mailto:brianwdouglas@proton.me">Have a comment?</a></small>
    </p>
</footer>

</div>

<script src="/scripts/chicken-and-magpie.js"></script>
<script src="/scripts/skip-to-section.js"></script>
</body>
</html>
