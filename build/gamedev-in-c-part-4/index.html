<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <!-- Meta Description -->
    <meta name="description" content="GameDev in C Part 4: A Snake Clone"/>

    <!-- Keywords -->
    <meta name="keywords" content="Brian Douglas, blog, c,gamedev,raylib"/>

    <!-- Author -->
    <meta name="author" content="Brian Douglas"/>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="BrianDouglas.ie - GameDev in C Part 4: A Snake Clone"/>
    <meta property="og:description" content="GameDev in C Part 4: A Snake Clone"/>
    <meta property="og:url" content="https://www.briandouglas.ie"/>
    <meta property="og:image" content="http://www.briandouglas.ie/images/og-images/gamedev-in-c-part-4.png"/>
    <meta property="og:image:type" content="image/png"/>
    <meta property="og:image:width" content="1280"/>
    <meta property="og:image:height" content="640"/>
    <meta property="og:site_name" content="BrianDouglas.ie"/>
    <meta property="og:image:alt" content="A preview image for the post titled 'GameDev in C Part 4: A Snake Clone'"/>

    <!-- Twitter Meta -->
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@BrianDouglasIE"/>
    <meta name="twitter:title" content="BrianDouglas.ie - GameDev in C Part 4: A Snake Clone"/>
    <meta name="twitter:description" content="GameDev in C Part 4: A Snake Clone"/>
    <meta name="twitter:image" content="http://www.briandouglas.ie/images/og-images/gamedev-in-c-part-4.png"/>

    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.briandouglas.ie"/>

    <!-- Favicon (Optional) -->
    <link rel="icon" href="https://www.briandouglas.ie/favicon.ico" type="image/x-icon"/>

    <!-- Robots -->
    <meta name="robots" content="index, follow"/>

    <!-- Favicon-->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/site.webmanifest"/>

    <title>GameDev in C Part 4: A Snake Clone</title>
    <link rel="stylesheet" href="/styles.css">
    <style>
pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#24292e;background:#ffffff}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#d73a49}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#6f42c1}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#005cc5}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#032f62}.hljs-built_in,.hljs-symbol{color:#e36209}.hljs-code,.hljs-comment,.hljs-formula{color:#6a737d}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#22863a}.hljs-subst{color:#24292e}.hljs-section{color:#005cc5;font-weight:bold}.hljs-bullet{color:#735c0f}.hljs-emphasis{color:#24292e;font-style:italic}.hljs-strong{color:#24292e;font-weight:bold}.hljs-addition{color:#22863a;background-color:#f0fff4}.hljs-deletion{color:#b31d28;background-color:#ffeef0}.hljs-char.escape_,.hljs-link,.hljs-params,.hljs-property,.hljs-punctuation,.hljs-tag{}
    </style>
</head>
<body>

<div class="content">
    <header class="site-header">
    <a href="/" class="home">Brian Douglas</a>

    <div class="svg-container">
        <a href="https://github.com/BrianDouglasIE" class="github">
            <svg
                height="32"
                aria-hidden="true"
                viewBox="0 0 24 24"
                width="32"
                data-view-component="true"
            >
                <path
                    d="M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547C20.709 21.637 24 17.324 24 12.25 24 5.896 18.854.75 12.5.75Z"
                ></path>
            </svg>
        </a>

        <a
            href="https://linkedin.com/in/brian-douglas-90abb93ab"
            class="linkedin"
        >
            <svg
                viewBox="0 0 128 128"
                height="32"
                aria-hidden="true"
                width="32"
                data-view-component="true"
            >
                <path
                    d="M116 3H12a8.91 8.91 0 00-9 8.8v104.42a8.91 8.91 0 009 8.78h104a8.93 8.93 0 009-8.81V11.77A8.93 8.93 0 00116 3zM39.17 107H21.06V48.73h18.11zm-9-66.21a10.5 10.5 0 1110.49-10.5 10.5 10.5 0 01-10.54 10.48zM107 107H88.89V78.65c0-6.75-.12-15.44-9.41-15.44s-10.87 7.36-10.87 15V107H50.53V48.73h17.36v8h.24c2.42-4.58 8.32-9.41 17.13-9.41C103.6 47.28 107 59.35 107 75z"
                ></path>
            </svg>
        </a>
    </div>
</header>

    <div class="breadcrumbs">
        <a href="/">Home</a> / <span>GameDev in C Part 4: A Snake Clone</span>
    </div>

    <main>
        <article class="post">
            <header>
                <h1>GameDev in C Part 4: A Snake Clone</h1>
                <time datetime="14/02/2025">February 14th, 2025</time>
            </header>

            <div class="body">
                <p>Happy Valentines Day!, I made a snake clone in C.</p>
<!-- more -->
<p>This is a quick interlude from the regular GameDev in C posts. I was making very little progress
on the doodle jump style game on which the series is based. So I thought I would take a quick
break and code up a snake clone.</p>
<p>I chose snake as I have written this type of game previously in JS and Python. So I didn't really
have to figure much out. Just get down to writing some C. I haev included the full source code in
this article. One nice feature that I added was smooth transitions between cells. I did this by
growing and shortening the head and tail respectively, based on an animation timer. This makes for
a nice animation and makes it look like the snake is moving smoothly, rather than jumping a cell at
a time. The implementation can be seen in the <code>SnakeDrawHead</code> and <code>SnakeDrawTail</code> methods. Apart from
this it's a regular old snake clone.</p>
<h2 id="thoughts">Thoughts</h2>
<p>I really enjoyed coding this, it's the first time I have felt productive in C. I am starting to grasp
arrays and pointers. I may even be beginning to think in a C manner. I kept everything in one file for
convenience. This helped me think more about what the code did, and less about where the code lived.</p>
<p>Anyway, take a look at the source code below. I'll get back to the main "SlimeJump" game in the next post.</p>
<p><magpie-trinket>Source code is also available at <a href="https://github.com/BrianDouglasIE/snake-c-raylib/tree/main">BrianDouglasIE/snake-c-raylib</a></magpie-trinket></p>
<pre class="c language-c"><code class="hljs c language-c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;raylib.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;math.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span>

<span class="hljs-type">float</span> <span class="hljs-title function_">percentOf</span><span class="hljs-params">(<span class="hljs-type">float</span> percent, <span class="hljs-type">float</span> number)</span>
{
    <span class="hljs-keyword">return</span> (percent / number) * <span class="hljs-number">100.0f</span>;
}

<span class="hljs-type">float</span> <span class="hljs-title function_">asPercentOf</span><span class="hljs-params">(<span class="hljs-type">float</span> number, <span class="hljs-type">float</span> percent)</span>
{
    <span class="hljs-keyword">return</span> (percent / <span class="hljs-number">100.0f</span>) * number;
}

<span class="hljs-type">int</span> <span class="hljs-title function_">randomInt</span><span class="hljs-params">(<span class="hljs-type">int</span> min, <span class="hljs-type">int</span> max)</span>
{
    <span class="hljs-keyword">return</span> (rand() % max) + min;
}

<span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Direction</span> {</span>
    UP, DOWN, LEFT, RIGHT
};

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Snake</span> {</span>
    <span class="hljs-type">int</span> x;
    <span class="hljs-type">int</span> y;
    <span class="hljs-type">float</span> speed;
    <span class="hljs-type">float</span> moveTimer;
    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Direction</span> <span class="hljs-title">direction</span>;</span>
    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Direction</span> <span class="hljs-title">nextDirection</span>;</span>
};

<span class="hljs-keyword">struct</span> Snake <span class="hljs-title function_">SnakeCreate</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span>
{
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">struct</span> Snake) {
        .x = x,
        .y = y,
        .speed = <span class="hljs-number">0.2f</span>,
        .moveTimer = <span class="hljs-number">0</span>,
        .direction = RIGHT,
        .nextDirection = RIGHT,
    };
}

<span class="hljs-type">void</span> <span class="hljs-title function_">SnakeMoveInCurrentDirection</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Snake *s)</span>
{
    <span class="hljs-keyword">switch</span>(s-&gt;direction)
    {
        <span class="hljs-keyword">case</span> UP:
            s-&gt;y -= <span class="hljs-number">1</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOWN:
            s-&gt;y += <span class="hljs-number">1</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> LEFT:
            s-&gt;x -= <span class="hljs-number">1</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> RIGHT:
            s-&gt;x += <span class="hljs-number">1</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-type">void</span> <span class="hljs-title function_">SnakeScreenWrap</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Snake *s, <span class="hljs-type">int</span> colCount, <span class="hljs-type">int</span> rowCount)</span>
{
    <span class="hljs-keyword">if</span>(s-&gt;x &lt; <span class="hljs-number">0</span>) {
        s-&gt;x = colCount - <span class="hljs-number">1</span>;
        s-&gt;direction = LEFT;
    }
    <span class="hljs-keyword">if</span>(s-&gt;x &gt; colCount - <span class="hljs-number">1</span>) {
        s-&gt;x = <span class="hljs-number">0</span>;
        s-&gt;direction = RIGHT;
    }
    <span class="hljs-keyword">if</span>(s-&gt;y &lt; <span class="hljs-number">0</span>) {
        s-&gt;y = rowCount - <span class="hljs-number">1</span>;
        s-&gt;direction = UP;
    }
    <span class="hljs-keyword">if</span>(s-&gt;y &gt; rowCount - <span class="hljs-number">1</span>) {
        s-&gt;y = <span class="hljs-number">0</span>;
        s-&gt;direction = DOWN;
    }
}

<span class="hljs-type">void</span> <span class="hljs-title function_">SnakeUpdate</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Snake *s, <span class="hljs-type">float</span> dt, <span class="hljs-keyword">struct</span> Snake *target)</span>
{
    s-&gt;moveTimer += dt;
    <span class="hljs-keyword">if</span>(s-&gt;moveTimer &gt;= s-&gt;speed) {
        s-&gt;moveTimer -= s-&gt;speed;

        <span class="hljs-keyword">if</span>(target == <span class="hljs-literal">NULL</span>) {
            <span class="hljs-keyword">if</span>(s-&gt;direction != s-&gt;nextDirection)
            {
                s-&gt;direction = s-&gt;nextDirection;
            }

            SnakeMoveInCurrentDirection(s);
        } <span class="hljs-keyword">else</span> {
            s-&gt;x = target-&gt;x;
            s-&gt;y = target-&gt;y;
            s-&gt;direction = target-&gt;direction;
        }
    }
}

<span class="hljs-type">void</span> <span class="hljs-title function_">SnakeSetDirection</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Snake *s, <span class="hljs-type">int</span> dirX, <span class="hljs-type">int</span> dirY)</span>
{
    <span class="hljs-keyword">if</span>(dirX &amp;&amp; dirY) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span>(!dirX &amp;&amp; !dirY) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span>(dirY &amp;&amp; (s-&gt;direction == UP || s-&gt;direction == DOWN)) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span>(dirX &amp;&amp; (s-&gt;direction == LEFT || s-&gt;direction == RIGHT)) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">if</span>(dirX == <span class="hljs-number">-1</span>) {
        s-&gt;nextDirection = LEFT;
    }
    <span class="hljs-keyword">if</span>(dirX == <span class="hljs-number">1</span>) {
        s-&gt;nextDirection = RIGHT;
    }
    <span class="hljs-keyword">if</span>(dirY == <span class="hljs-number">-1</span>) {
        s-&gt;nextDirection = UP;
    }
    <span class="hljs-keyword">if</span>(dirY == <span class="hljs-number">1</span>) {
        s-&gt;nextDirection = DOWN;
    }
}

<span class="hljs-type">void</span> <span class="hljs-title function_">SnakeDrawHead</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Snake *s, <span class="hljs-type">int</span> cellSize, Color color)</span>
{
    <span class="hljs-type">int</span> w, h;
    <span class="hljs-type">float</span> growthPercent = percentOf(s-&gt;moveTimer, s-&gt;speed);

    <span class="hljs-keyword">switch</span>(s-&gt;direction)
    {
        <span class="hljs-keyword">case</span> UP:
            h = <span class="hljs-built_in">floor</span>(asPercentOf(cellSize, growthPercent));
            DrawRectangle(s-&gt;x * cellSize, (s-&gt;y * cellSize) + (cellSize - h), cellSize, h, color);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOWN:
            h = <span class="hljs-built_in">floor</span>(asPercentOf(cellSize, growthPercent));
            DrawRectangle(s-&gt;x * cellSize, s-&gt;y * cellSize, cellSize, h, color);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> RIGHT:
            w = <span class="hljs-built_in">floor</span>(asPercentOf(cellSize, growthPercent));
            DrawRectangle(s-&gt;x * cellSize, s-&gt;y * cellSize, w, cellSize, color);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> LEFT:
            w = <span class="hljs-built_in">floor</span>(asPercentOf(cellSize, growthPercent));
            DrawRectangle((s-&gt;x * cellSize) + (cellSize - w), s-&gt;y * cellSize, w, cellSize, color);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-type">void</span> <span class="hljs-title function_">SnakeDrawTail</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Snake *s, <span class="hljs-type">int</span> cellSize, Color color)</span>
{
    <span class="hljs-type">int</span> w, h;
    <span class="hljs-type">float</span> growthPercent = percentOf(s-&gt;moveTimer, s-&gt;speed);

    <span class="hljs-keyword">switch</span>(s-&gt;direction)
    {
        <span class="hljs-keyword">case</span> UP:
            h = <span class="hljs-built_in">floor</span>(asPercentOf(cellSize, growthPercent));
            DrawRectangle(s-&gt;x * cellSize, s-&gt;y * cellSize, cellSize, cellSize - h, color);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DOWN:
            h = <span class="hljs-built_in">floor</span>(asPercentOf(cellSize, growthPercent));
            DrawRectangle(s-&gt;x * cellSize, s-&gt;y * cellSize + h, cellSize, cellSize - h, color);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> RIGHT:
            w = <span class="hljs-built_in">floor</span>(asPercentOf(cellSize, growthPercent));
            DrawRectangle(s-&gt;x * cellSize + w, s-&gt;y * cellSize, cellSize - w, cellSize, color);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> LEFT:
            w = <span class="hljs-built_in">floor</span>(asPercentOf(cellSize, growthPercent));
            DrawRectangle(s-&gt;x * cellSize, s-&gt;y * cellSize, cellSize - w, cellSize, color);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-type">void</span> <span class="hljs-title function_">SnakeDraw</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Snake *s, <span class="hljs-type">int</span> cellSize, Color color)</span>
{
    DrawRectangle(s-&gt;x * cellSize, s-&gt;y * cellSize, cellSize, cellSize, color);
}

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Apple</span> {</span>
    <span class="hljs-type">int</span> x;
    <span class="hljs-type">int</span> y;
    <span class="hljs-type">int</span> active;
    <span class="hljs-type">float</span> lifeSpan;
    <span class="hljs-type">float</span> lifeTimer;
};

<span class="hljs-keyword">struct</span> Apple <span class="hljs-title function_">AppleCreate</span><span class="hljs-params">()</span>
{
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">struct</span> Apple) {
        .x = <span class="hljs-number">0</span>,
        .y = <span class="hljs-number">0</span>,
        .active = <span class="hljs-number">0</span>,
        .lifeSpan = <span class="hljs-number">0.0f</span>,
        .lifeTimer = <span class="hljs-number">0.0f</span>,
    };
}

<span class="hljs-type">void</span> <span class="hljs-title function_">AppleUpdate</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Apple *a, <span class="hljs-type">float</span> dt)</span>
{
    <span class="hljs-keyword">if</span>(!a-&gt;active) <span class="hljs-keyword">return</span>;

    a-&gt;lifeTimer += dt;
    <span class="hljs-keyword">if</span>(a-&gt;lifeTimer &gt; a-&gt;lifeSpan)
    {
        a-&gt;lifeTimer -= a-&gt;lifeSpan;
        a-&gt;active = <span class="hljs-number">0</span>;
    }
}

<span class="hljs-type">void</span> <span class="hljs-title function_">AppleActivateAt</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Apple *a, <span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span>
{
    a-&gt;x = x;
    a-&gt;y = y;
    a-&gt;active = <span class="hljs-number">1</span>;
    a-&gt;lifeTimer = <span class="hljs-number">0</span>;
    a-&gt;lifeSpan = <span class="hljs-number">5.0f</span>;
}

<span class="hljs-type">void</span> <span class="hljs-title function_">AppleDraw</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Apple *a, <span class="hljs-type">int</span> cellSize, Color color)</span>
{
    <span class="hljs-keyword">if</span>(!a-&gt;active) <span class="hljs-keyword">return</span>;
    DrawRectangle(a-&gt;x * cellSize, a-&gt;y * cellSize, cellSize, cellSize, color);
}

<span class="hljs-type">int</span> <span class="hljs-title function_">collidesWithSnake</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> Snake s[], <span class="hljs-type">int</span> snakeLength, <span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span>
{
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; snakeLength; i++)
    {
        <span class="hljs-keyword">if</span>(s[i].x == x &amp;&amp; s[i].y == y) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

Vector2 <span class="hljs-title function_">getRandomCellCoords</span><span class="hljs-params">(<span class="hljs-type">int</span> colCount, <span class="hljs-type">int</span> rowCount)</span>
{
    <span class="hljs-type">int</span> x = randomInt(<span class="hljs-number">0</span>, colCount);
    <span class="hljs-type">int</span> y = randomInt(<span class="hljs-number">0</span>, rowCount);
    <span class="hljs-keyword">return</span> (Vector2) { x, y };
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    srand((<span class="hljs-type">unsigned</span>)time(<span class="hljs-literal">NULL</span>));

    <span class="hljs-type">const</span> <span class="hljs-type">int</span> screenSize = <span class="hljs-number">600</span>;
    <span class="hljs-type">const</span> <span class="hljs-type">int</span> screenWidth = screenSize;
    <span class="hljs-type">const</span> <span class="hljs-type">int</span> screenHeight = screenSize;

    InitWindow(screenWidth, screenHeight, <span class="hljs-string">&quot;snake&quot;</span>);
    SetTargetFPS(<span class="hljs-number">60</span>);

    <span class="hljs-type">const</span> <span class="hljs-type">int</span> gridSize = <span class="hljs-number">20</span>;
    <span class="hljs-type">const</span> <span class="hljs-type">int</span> cellSize = <span class="hljs-built_in">floor</span>(screenSize / gridSize);
    <span class="hljs-type">const</span> <span class="hljs-type">int</span> colCount = <span class="hljs-built_in">floor</span>(screenWidth / cellSize);
    <span class="hljs-type">const</span> <span class="hljs-type">int</span> rowCount = <span class="hljs-built_in">floor</span>(screenHeight / cellSize);

    <span class="hljs-type">int</span> gameInProgress = <span class="hljs-number">1</span>;

    <span class="hljs-type">int</span> snakeLength = <span class="hljs-number">4</span>;
    <span class="hljs-type">int</span> snakeMaxLength = colCount * rowCount;
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Snake</span> <span class="hljs-title">snake</span>[<span class="hljs-title">snakeMaxLength</span>];</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; snakeLength; i++)
    {
        snake[i] = SnakeCreate(<span class="hljs-built_in">floor</span>(colCount / <span class="hljs-number">2</span>) - i, <span class="hljs-built_in">floor</span>(rowCount / <span class="hljs-number">2</span>));
    }

    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Apple</span> <span class="hljs-title">apple</span> =</span> AppleCreate();

    <span class="hljs-type">float</span> appleSpawnInterval = <span class="hljs-number">8.0f</span>;
    <span class="hljs-type">float</span> appleSpawnTimer = <span class="hljs-number">0.0f</span>;

    <span class="hljs-keyword">while</span>(!WindowShouldClose())
    {
        <span class="hljs-comment">// update</span>
        <span class="hljs-keyword">if</span>(gameInProgress) {
            <span class="hljs-type">int</span> up, down, left, right, dirX, dirY;

            <span class="hljs-type">float</span> dt = GetFrameTime();

            up = IsKeyDown(KEY_UP) ? <span class="hljs-number">-1</span> : <span class="hljs-number">0</span>;
            down = IsKeyDown(KEY_DOWN) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
            left = IsKeyDown(KEY_LEFT) ? <span class="hljs-number">-1</span> : <span class="hljs-number">0</span>;
            right = IsKeyDown(KEY_RIGHT) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;

            dirY = up + down;
            dirX = left + right;

            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = snakeLength; i &gt; <span class="hljs-number">0</span>; i--)
            {
                SnakeUpdate(&amp;snake[i], dt, &amp;snake[i - <span class="hljs-number">1</span>]);
            }

            snake[snakeLength - <span class="hljs-number">1</span>].direction = snake[snakeLength - <span class="hljs-number">2</span>].direction;
            SnakeSetDirection(&amp;snake[<span class="hljs-number">0</span>], dirX, dirY);
            SnakeUpdate(&amp;snake[<span class="hljs-number">0</span>], dt, <span class="hljs-literal">NULL</span>);
            SnakeScreenWrap(&amp;snake[<span class="hljs-number">0</span>], colCount, rowCount);

            <span class="hljs-keyword">if</span>(apple.active &amp;&amp; snake[<span class="hljs-number">0</span>].x == apple.x &amp;&amp; snake[<span class="hljs-number">0</span>].y == apple.y)
            {
                apple.active = <span class="hljs-number">0</span>;
                snake[snakeLength] = snake[snakeLength - <span class="hljs-number">1</span>];
                snakeLength++;
            }

            <span class="hljs-keyword">if</span>(!apple.active)
            {
                appleSpawnTimer += dt;
                <span class="hljs-keyword">if</span>(appleSpawnTimer &gt; appleSpawnInterval)
                {
                    appleSpawnTimer -= appleSpawnInterval;

                    Vector2 newPos = getRandomCellCoords(colCount, rowCount);
                    <span class="hljs-keyword">while</span>(collidesWithSnake(snake, snakeLength, newPos.x, newPos.y)) {
                        newPos = getRandomCellCoords(colCount, rowCount);
                    }
                    AppleActivateAt(&amp;apple, newPos.x, newPos.y);
                }
            }

            AppleUpdate(&amp;apple, dt);

            <span class="hljs-type">int</span> tailLength = snakeLength - <span class="hljs-number">1</span>;
            <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Snake</span> <span class="hljs-title">tail</span>[<span class="hljs-title">tailLength</span>];</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; tailLength; i++)
            {
                tail[i] = snake[i];
            }
            <span class="hljs-keyword">if</span>(collidesWithSnake(tail, tailLength, snake[<span class="hljs-number">0</span>].x, snake[<span class="hljs-number">0</span>].y))
            {
                gameInProgress = <span class="hljs-number">0</span>;
            }
        }

        <span class="hljs-comment">// draw</span>
        BeginDrawing();
        ClearBackground(BLACK);

        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> r = <span class="hljs-number">0</span>; r &lt; rowCount; r++)
        {
            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> c = <span class="hljs-number">0</span>; c &lt; colCount; c++) {
                Color color = ((r + c) % <span class="hljs-number">2</span>) == <span class="hljs-number">0</span> ? RAYWHITE : WHITE;
                DrawRectangle(c * cellSize, r * cellSize, cellSize, cellSize, color);
            }
        }

        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; snakeLength - <span class="hljs-number">1</span>; i++)
        {
            SnakeDraw(&amp;snake[i], cellSize, DARKGREEN);
        }
        SnakeDrawHead(&amp;snake[<span class="hljs-number">0</span>], cellSize, DARKGREEN);
        SnakeDrawTail(&amp;snake[snakeLength - <span class="hljs-number">1</span>], cellSize, DARKGREEN);

        AppleDraw(&amp;apple, cellSize, RED);

        <span class="hljs-keyword">if</span>(!gameInProgress) {
            <span class="hljs-type">const</span> <span class="hljs-type">char</span> *gameOverText = <span class="hljs-string">&quot;GAME OVER&quot;</span>;
            <span class="hljs-type">int</span> fontSize = <span class="hljs-number">40</span>;
            <span class="hljs-type">int</span> textLength = MeasureText(gameOverText, fontSize);

            <span class="hljs-type">int</span> posX = <span class="hljs-built_in">floor</span>(screenWidth / <span class="hljs-number">2</span>) - <span class="hljs-built_in">floor</span>(textLength / <span class="hljs-number">2</span>);
            <span class="hljs-type">int</span> posY = <span class="hljs-built_in">floor</span>(screenHeight / <span class="hljs-number">2</span>);
            DrawText(gameOverText, posX, posY, fontSize, BLACK);
        }

        EndDrawing();
    }

    CloseWindow();
}
</code></pre>
            </div>

            <footer>
                <p><i>Until next time,</i></p>
                <p><i>Brian</i></p>
            </footer>
        </article>
    </main>

    <footer class="site-footer">
    <p>
        <small>Since August 4th, 2023. All words by Brian
            Douglas. <a href="mailto:brianwdouglas@proton.me">Have a comment?</a></small>
    </p>
</footer>

</div>

<script src="/scripts/chicken-and-magpie.js"></script>
<script src="/scripts/skip-to-section.js"></script>
</body>
</html>
