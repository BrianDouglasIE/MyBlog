<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <!-- Meta Description -->
    <meta name="description" content="Creating a Pong clone using Raylib and Go"/>

    <!-- Keywords -->
    <meta name="keywords" content="Brian Douglas, blog, go,raylib"/>

    <!-- Author -->
    <meta name="author" content="Brian Douglas"/>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="BrianDouglas.ie - Creating a Pong clone using Raylib and Go"/>
    <meta property="og:description" content="Creating a Pong clone using Raylib and Go"/>
    <meta property="og:url" content="https://www.briandouglas.ie"/>
    <meta property="og:image" content="http://www.briandouglas.ie/images/og-images/pong-using-raylib-and-go.png"/>
    <meta property="og:image:type" content="image/png"/>
    <meta property="og:image:width" content="1280"/>
    <meta property="og:image:height" content="640"/>
    <meta property="og:site_name" content="BrianDouglas.ie"/>
    <meta property="og:image:alt" content="A preview image for the post titled 'Creating a Pong clone using Raylib and Go'"/>

    <!-- Twitter Meta -->
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@BrianDouglasIE"/>
    <meta name="twitter:title" content="BrianDouglas.ie - Creating a Pong clone using Raylib and Go"/>
    <meta name="twitter:description" content="Creating a Pong clone using Raylib and Go"/>
    <meta name="twitter:image" content="http://www.briandouglas.ie/images/og-images/pong-using-raylib-and-go.png"/>

    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.briandouglas.ie"/>

    <!-- Favicon (Optional) -->
    <link rel="icon" href="https://www.briandouglas.ie/favicon.ico" type="image/x-icon"/>

    <!-- Robots -->
    <meta name="robots" content="index, follow"/>

    <!-- Favicon-->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/site.webmanifest"/>

    <title>Creating a Pong clone using Raylib and Go</title>
    <link rel="stylesheet" href="/styles.css">
    <style>
pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#24292e;background:#ffffff}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#d73a49}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#6f42c1}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#005cc5}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#032f62}.hljs-built_in,.hljs-symbol{color:#e36209}.hljs-code,.hljs-comment,.hljs-formula{color:#6a737d}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#22863a}.hljs-subst{color:#24292e}.hljs-section{color:#005cc5;font-weight:bold}.hljs-bullet{color:#735c0f}.hljs-emphasis{color:#24292e;font-style:italic}.hljs-strong{color:#24292e;font-weight:bold}.hljs-addition{color:#22863a;background-color:#f0fff4}.hljs-deletion{color:#b31d28;background-color:#ffeef0}.hljs-char.escape_,.hljs-link,.hljs-params,.hljs-property,.hljs-punctuation,.hljs-tag{}
    </style>
</head>
<body>

<div class="content">
    <header class="site-header">
    <a href="/" class="home">Brian Douglas</a>

    <div class="svg-container">
        <a href="https://github.com/BrianDouglasIE" class="github">
            <svg
                height="32"
                aria-hidden="true"
                viewBox="0 0 24 24"
                width="32"
                data-view-component="true"
            >
                <path
                    d="M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547C20.709 21.637 24 17.324 24 12.25 24 5.896 18.854.75 12.5.75Z"
                ></path>
            </svg>
        </a>

        <a
            href="https://linkedin.com/in/brian-douglas-90abb93ab"
            class="linkedin"
        >
            <svg
                viewBox="0 0 128 128"
                height="32"
                aria-hidden="true"
                width="32"
                data-view-component="true"
            >
                <path
                    d="M116 3H12a8.91 8.91 0 00-9 8.8v104.42a8.91 8.91 0 009 8.78h104a8.93 8.93 0 009-8.81V11.77A8.93 8.93 0 00116 3zM39.17 107H21.06V48.73h18.11zm-9-66.21a10.5 10.5 0 1110.49-10.5 10.5 10.5 0 01-10.54 10.48zM107 107H88.89V78.65c0-6.75-.12-15.44-9.41-15.44s-10.87 7.36-10.87 15V107H50.53V48.73h17.36v8h.24c2.42-4.58 8.32-9.41 17.13-9.41C103.6 47.28 107 59.35 107 75z"
                ></path>
            </svg>
        </a>
    </div>
</header>

    <div class="breadcrumbs">
        <a href="/">Home</a> / <span>Creating a Pong clone using Raylib and Go</span>
    </div>

    <main>
        <article class="post">
            <header>
                <h1>Creating a Pong clone using Raylib and Go</h1>
                <time datetime="22/09/2024">September 22nd, 2024</time>
            </header>

            <div class="body">
                <p>As a fun exercise I implemented a rudimentary Pong clone using Raylib and Go.</p>
<!-- more -->
<p><chicken-asks>
Why Go?
</chicken-asks></p>
<p><magpie-replies>
So many reasons. Most notably the tooling, language simplicity, and similarity to C.
</magpie-replies></p>
<h2 id="mythoughts">My Thoughts</h2>
<p>I have seen a couple of videos on YouTube where developers have been making games using Go.
My understanding of Go was that it was a Web Dev Backend language for hipsters. However,
having written this simple program in Go I have been pleasantly surprised by the features
the language has to offer. For me the built in "tools" that come with Go are excellent and
not something I was aware of. Go provides a built in code formatter, gofmt, which means I
don't have to think about how my Go code should look. It also comes with, gopls, a language
server developed by the Go team. This meant that I only had to install the <a href="https://github.com/fatih/vim-go">vim-go</a>
extension to turn neovim into a Go IDE without any set up.</p>
<p>Then it comes to the language itself. I had heard Go was "simple". To my surprise this was
actually true. I was able to write Go pretty much straight away due to it's familiar syntax.
The only new aspects to me were the assignment operator <code>:=</code>, that <code>slices</code> were favoured
over <code>arrays</code>, and that a capital letter was used to signify privacy.</p>
<p>It took me 90 minutes to write the below Pong implementation. I had never written a line of
Go before, so I feel this is a big achievement for the language. I would say I was instantly
productive. Looking at the source code of my Pong implementation, I am sure you will agree
it is clear and readable. This is owed to the simplicity of Go. A language of which I feel
I will be using a lot more of in the future.</p>
<h2 id="thesetup">The Setup</h2>
<p>No much to it, create a Go module and install <a href="https://github.com/gen2brain/raylib-go">raylib-go</a>.</p>
<pre><code class="hljs"><span class="hljs-keyword">go</span> <span class="hljs-keyword">mod</span> init main
<span class="hljs-keyword">go</span> <span class="hljs-built_in">get</span> github.<span class="hljs-keyword">com</span>/gen2brain/raylib-<span class="hljs-keyword">go</span>
</code></pre>
<h2 id="thecode">The Code</h2>
<p><magpie-trinket>
The source code is also available on github, <a href="https://github.com/BrianDouglasIE/raylib-go-pong">BrianDouglasIE/raylib-go-pong</a>.
</magpie-trinket></p>
<p>I won't write out what the code is doing as I feel it is fairly self explanatory. I know you
are an ace programmer, so you don't need your hand held.</p>
<p>The game can be launched with <code>go run main.go</code>.</p>
<pre class="go language-go"><code class="hljs go language-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
        <span class="hljs-string">&quot;fmt&quot;</span>
        <span class="hljs-string">&quot;image/color&quot;</span>
        <span class="hljs-string">&quot;math/rand&quot;</span>
        <span class="hljs-string">&quot;time&quot;</span>

        rl <span class="hljs-string">&quot;github.com/gen2brain/raylib-go/raylib&quot;</span>
)

<span class="hljs-keyword">const</span> (
        SCREEN_WIDTH          = <span class="hljs-number">800</span>
        SCREEN_HEIGHT         = <span class="hljs-number">450</span>
        CENTER_X              = SCREEN_WIDTH / <span class="hljs-number">2</span>
        CENTER_Y              = SCREEN_HEIGHT / <span class="hljs-number">2</span>
        SIDE_BUFFER_WIDTH     = <span class="hljs-number">40</span>
        INITIAL_PADDLE_HEIGHT = <span class="hljs-number">80</span>
        INITIAL_PADDLE_WIDTH  = <span class="hljs-number">20</span>
        INITIAL_PADDLE_SPEED  = <span class="hljs-number">4</span>
        INITIAL_BALL_SIZE     = <span class="hljs-number">16</span>
        INITIAL_BALL_SPEED    = <span class="hljs-number">4</span>
        RIGHT_BOUNDS          = SCREEN_WIDTH
        LEFT_BOUNDS           = <span class="hljs-number">0</span>
        TOP_BOUNDS            = <span class="hljs-number">0</span>
        BOTTOM_BOUNDS         = SCREEN_HEIGHT
)

<span class="hljs-keyword">type</span> Paddle <span class="hljs-keyword">struct</span> {
        X      <span class="hljs-type">int32</span>
        Y      <span class="hljs-type">int32</span>
        VX     <span class="hljs-type">int32</span>
        VY     <span class="hljs-type">int32</span>
        Width  <span class="hljs-type">int32</span>
        Height <span class="hljs-type">int32</span>
        Score  <span class="hljs-type">int32</span>
        Speed  <span class="hljs-type">int32</span>
        Color  color.RGBA
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p *Paddle)</span></span> Draw() {
        rl.DrawRectangle(p.X, p.Y, p.Width, p.Height, p.Color)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p *Paddle)</span></span> IncrementScore() {
        p.Score += <span class="hljs-number">1</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p *Paddle)</span></span> Update() {
        p.X += p.VX
        p.Y += p.VY
}

<span class="hljs-keyword">type</span> Ball <span class="hljs-keyword">struct</span> {
        X     <span class="hljs-type">int32</span>
        Y     <span class="hljs-type">int32</span>
        VX    <span class="hljs-type">int32</span>
        VY    <span class="hljs-type">int32</span>
        Size  <span class="hljs-type">int32</span>
        Serve <span class="hljs-type">int32</span>
        Color color.RGBA
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Ball)</span></span> Draw() {
        rl.DrawRectangle(b.X, b.Y, b.Size, b.Size, b.Color)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Ball)</span></span> Update() {
        b.X += b.VX
        b.Y += b.VY
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Ball)</span></span> Reset() {
        b.Size = INITIAL_BALL_SIZE
        b.X = CENTER_X - (INITIAL_BALL_SIZE / <span class="hljs-number">2</span>)
        b.Y = CENTER_Y - (INITIAL_BALL_SIZE / <span class="hljs-number">2</span>)
        b.Color = rl.White
        b.VX = INITIAL_BALL_SPEED * b.serveModifier()
        b.VY = INITIAL_BALL_SPEED * pickRandomVariant()
        b.Serve += <span class="hljs-number">1</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Ball)</span></span> BounceVertically() {
        b.VY = b.VY * <span class="hljs-number">-1</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Ball)</span></span> BounceHorizontally() {
        b.VX = b.VX * <span class="hljs-number">-1</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Ball)</span></span> serveModifier() <span class="hljs-type">int32</span> {
        <span class="hljs-keyword">if</span> b.Serve%<span class="hljs-number">2</span> == <span class="hljs-number">0</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
        }

        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isBallOutToLeft</span><span class="hljs-params">(b *Ball)</span></span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">return</span> b.X &lt; LEFT_BOUNDS
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isBallOutToRight</span><span class="hljs-params">(b *Ball)</span></span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">return</span> b.X-b.Size &gt; RIGHT_BOUNDS
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ballAtBottom</span><span class="hljs-params">(b *Ball)</span></span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">return</span> b.Y &gt; SCREEN_HEIGHT
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ballAtTop</span><span class="hljs-params">(b *Ball)</span></span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">return</span> b.Y+b.Size &lt; <span class="hljs-number">0</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">paddleAtTop</span><span class="hljs-params">(p *Paddle)</span></span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">return</span> p.Y &lt; TOP_BOUNDS
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">paddleAtBottom</span><span class="hljs-params">(p *Paddle)</span></span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">return</span> p.Y+p.Height &gt; BOTTOM_BOUNDS
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">pickRandomVariant</span><span class="hljs-params">()</span></span> <span class="hljs-type">int32</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-type">int32</span>(rand.Intn(<span class="hljs-number">2</span>)*<span class="hljs-number">2</span> - <span class="hljs-number">1</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getScoreText</span><span class="hljs-params">(leftPaddle *Paddle, rightPaddle *Paddle)</span></span> <span class="hljs-type">string</span> {
        <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">&quot;%d   %d&quot;</span>, leftPaddle.Score, rightPaddle.Score)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">movePaddleToInterceptBall</span><span class="hljs-params">(p *Paddle, b *Ball)</span></span> {
        paddleCenter := p.Y + p.Height/<span class="hljs-number">2</span>
        <span class="hljs-keyword">if</span> b.Y &gt; paddleCenter {
                p.VY = p.Speed
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> b.Y &lt; paddleCenter {
                p.VY = -p.Speed
        } <span class="hljs-keyword">else</span> {
                p.VY = <span class="hljs-number">0</span>
        }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">movePaddleTowardsCenter</span><span class="hljs-params">(p *Paddle)</span></span> {
        paddleCenter := p.Y + p.Height/<span class="hljs-number">2</span>
        <span class="hljs-keyword">if</span> paddleCenter &lt; CENTER_Y {
                p.VY = p.Speed
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> paddleCenter &gt; CENTER_Y {
                p.VY = -p.Speed
        } <span class="hljs-keyword">else</span> {
                p.VY = <span class="hljs-number">0</span>
        }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ballIntersectsPaddle</span><span class="hljs-params">(b *Ball, p *Paddle)</span></span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">return</span> b.X &lt; p.X+p.Width &amp;&amp;
                b.X+b.Size &gt; p.X &amp;&amp;
                b.Y+b.Size &gt; p.Y &amp;&amp;
                b.Y &lt; p.Y+p.Height
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
        rand.Seed(time.Now().UnixNano())
        rl.InitWindow(SCREEN_WIDTH, SCREEN_HEIGHT, <span class="hljs-string">&quot;Pong&quot;</span>)
        <span class="hljs-keyword">defer</span> rl.CloseWindow()

        rl.SetTargetFPS(<span class="hljs-number">60</span>)

        ball := Ball{}
        ball.Reset()

        leftPaddle := Paddle{
                Width:  INITIAL_PADDLE_WIDTH,
                Height: INITIAL_PADDLE_HEIGHT,
                Speed:  INITIAL_PADDLE_SPEED,
                Color:  rl.White,
                X:      SIDE_BUFFER_WIDTH,
                Y:      CENTER_Y - (INITIAL_PADDLE_HEIGHT / <span class="hljs-number">2</span>),
                Score:  <span class="hljs-number">0</span>,
        }

        rightPaddle := Paddle{
                Width:  INITIAL_PADDLE_WIDTH,
                Height: INITIAL_PADDLE_HEIGHT,
                Speed:  INITIAL_PADDLE_SPEED,
                Color:  rl.White,
                X:      SCREEN_WIDTH - SIDE_BUFFER_WIDTH - INITIAL_PADDLE_WIDTH,
                Y:      CENTER_Y - (INITIAL_PADDLE_HEIGHT / <span class="hljs-number">2</span>),
                Score:  <span class="hljs-number">0</span>,
        }

        <span class="hljs-keyword">for</span> !rl.WindowShouldClose() {
                ball.Update()

                <span class="hljs-keyword">if</span> isBallOutToLeft(&amp;ball) {
                        rightPaddle.IncrementScore()
                        ball.Reset()
                }

                <span class="hljs-keyword">if</span> isBallOutToRight(&amp;ball) {
                        leftPaddle.IncrementScore()
                        ball.Reset()
                }

                <span class="hljs-keyword">if</span> ballAtTop(&amp;ball) || ballAtBottom(&amp;ball) {
                        ball.BounceVertically()
                }

                leftPaddle.Update()
                rightPaddle.Update()

                <span class="hljs-keyword">if</span> ball.VX &lt; <span class="hljs-number">0</span> {
                        movePaddleTowardsCenter(&amp;rightPaddle)
                } <span class="hljs-keyword">else</span> {
                        movePaddleToInterceptBall(&amp;rightPaddle, &amp;ball)
                }

                <span class="hljs-keyword">if</span> rl.IsKeyDown(rl.KeyUp) {
                        leftPaddle.VY = -leftPaddle.Speed
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> rl.IsKeyDown(rl.KeyDown) {
                        leftPaddle.VY = leftPaddle.Speed
                } <span class="hljs-keyword">else</span> {
                        leftPaddle.VY = <span class="hljs-number">0</span>
                }

                <span class="hljs-keyword">if</span> paddleAtTop(&amp;rightPaddle) {
                        rightPaddle.Y = <span class="hljs-number">0</span>
                }

                <span class="hljs-keyword">if</span> paddleAtBottom(&amp;rightPaddle) {
                        rightPaddle.Y = SCREEN_HEIGHT - rightPaddle.Height
                }

                <span class="hljs-keyword">if</span> paddleAtTop(&amp;leftPaddle) {
                        leftPaddle.Y = <span class="hljs-number">0</span>
                }

                <span class="hljs-keyword">if</span> paddleAtBottom(&amp;leftPaddle) {
                        leftPaddle.Y = SCREEN_HEIGHT - leftPaddle.Height
                }

                <span class="hljs-keyword">if</span> ballIntersectsPaddle(&amp;ball, &amp;leftPaddle) ||
                        ballIntersectsPaddle(&amp;ball, &amp;rightPaddle) {
                        ball.BounceHorizontally()
                }

                rl.BeginDrawing()

                rl.ClearBackground(rl.Black)
                rl.DrawLine(CENTER_X, TOP_BOUNDS, CENTER_X, BOTTOM_BOUNDS, rl.LightGray)

                scoreText := getScoreText(&amp;leftPaddle, &amp;rightPaddle)
                textSize := rl.MeasureText(scoreText, <span class="hljs-number">20</span>)

                rl.DrawText(scoreText, CENTER_X-(textSize/<span class="hljs-number">2</span>), <span class="hljs-number">20</span>, <span class="hljs-number">20</span>, rl.White)

                leftPaddle.Draw()
                rightPaddle.Draw()
                ball.Draw()

                rl.EndDrawing()
        }
}
</code></pre>
            </div>

            <footer>
                <p><i>Until next time,</i></p>
                <p><i>Brian</i></p>
            </footer>
        </article>
    </main>

    <footer class="site-footer">
    <p>
        <small>Since August 4th, 2023. All words by Brian
            Douglas. <a href="mailto:brianwdouglas@proton.me">Have a comment?</a></small>
    </p>
</footer>

</div>

<script src="/scripts/chicken-and-magpie.js"></script>
<script src="/scripts/skip-to-section.js"></script>
</body>
</html>
