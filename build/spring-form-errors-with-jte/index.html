<!doctype html>
<html lang="en">
    <head>
        <!-- Google tag (gtag.js) -->
        <script
            async
            src="https://www.googletagmanager.com/gtag/js?id=G-SXTREFVFLB"
        ></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "G-SXTREFVFLB");
        </script>

        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <!-- Meta Description -->
        <meta name="description" content="Handle Spring form errors with JTE" />

        <!-- Keywords -->
        <meta
            name="keywords"
            content="Brian Douglas, blog, java,spring"
        />

        <!-- Author -->
        <meta name="author" content="Brian Douglas" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta
            property="og:title"
            content="BrianDouglas.ie - Handle Spring form errors with JTE"
        />
        <meta property="og:description" content="Handle Spring form errors with JTE" />
        <meta property="og:url" content="https://www.briandouglas.ie" />
        <meta
            property="og:image"
            content="http://www.briandouglas.ie/images/og-images/spring-form-errors-with-jte.png"
        />
        <meta property="og:image:type" content="image/png" />
        <meta property="og:image:width" content="1280" />
        <meta property="og:image:height" content="640" />
        <meta property="og:site_name" content="BrianDouglas.ie" />
        <meta
            property="og:image:alt"
            content="A preview image for the post titled 'Handle Spring form errors with JTE'"
        />

        <!-- Twitter Meta -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="@BrianDouglasIE" />
        <meta
            name="twitter:title"
            content="BrianDouglas.ie - Handle Spring form errors with JTE"
        />
        <meta name="twitter:description" content="Handle Spring form errors with JTE" />
        <meta
            name="twitter:image"
            content="http://www.briandouglas.ie/images/og-images/spring-form-errors-with-jte.png"
        />

        <!-- Canonical URL -->
        <link rel="canonical" href="https://www.briandouglas.ie" />

        <!-- Favicon (Optional) -->
        <link
            rel="icon"
            href="https://www.briandouglas.ie/favicon.ico"
            type="image/x-icon"
        />

        <!-- Robots -->
        <meta name="robots" content="index, follow" />

        <!-- Favicon-->
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="/apple-touch-icon.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/favicon-16x16.png"
        />
        <link rel="manifest" href="/site.webmanifest" />

        <title>Handle Spring form errors with JTE</title>
        <link rel="stylesheet" href="/styles.css" />
        <style>
            pre code.hljs {
                display: block;
                overflow-x: auto;
                padding: 1em;
            }
            code.hljs {
                padding: 3px 5px;
            }
            .hljs {
                color: #24292e;
                background: #ffffff;
            }
            .hljs-doctag,
            .hljs-keyword,
            .hljs-meta .hljs-keyword,
            .hljs-template-tag,
            .hljs-template-variable,
            .hljs-type,
            .hljs-variable.language_ {
                color: #d73a49;
            }
            .hljs-title,
            .hljs-title.class_,
            .hljs-title.class_.inherited__,
            .hljs-title.function_ {
                color: #6f42c1;
            }
            .hljs-attr,
            .hljs-attribute,
            .hljs-literal,
            .hljs-meta,
            .hljs-number,
            .hljs-operator,
            .hljs-selector-attr,
            .hljs-selector-class,
            .hljs-selector-id,
            .hljs-variable {
                color: #005cc5;
            }
            .hljs-meta .hljs-string,
            .hljs-regexp,
            .hljs-string {
                color: #032f62;
            }
            .hljs-built_in,
            .hljs-symbol {
                color: #e36209;
            }
            .hljs-code,
            .hljs-comment,
            .hljs-formula {
                color: #6a737d;
            }
            .hljs-name,
            .hljs-quote,
            .hljs-selector-pseudo,
            .hljs-selector-tag {
                color: #22863a;
            }
            .hljs-subst {
                color: #24292e;
            }
            .hljs-section {
                color: #005cc5;
                font-weight: bold;
            }
            .hljs-bullet {
                color: #735c0f;
            }
            .hljs-emphasis {
                color: #24292e;
                font-style: italic;
            }
            .hljs-strong {
                color: #24292e;
                font-weight: bold;
            }
            .hljs-addition {
                color: #22863a;
                background-color: #f0fff4;
            }
            .hljs-deletion {
                color: #b31d28;
                background-color: #ffeef0;
            }
            .hljs-char.escape_,
            .hljs-link,
            .hljs-params,
            .hljs-property,
            .hljs-punctuation,
            .hljs-tag {
            }
        </style>
    </head>
    <body>
        <div class="content">
            <header class="site-header">
    <a href="/" class="home">Brian Douglas</a>

    <div class="svg-container">
        <a href="https://github.com/BrianDouglasIE" class="github">
            <svg
                height="32"
                aria-hidden="true"
                viewBox="0 0 24 24"
                width="32"
                data-view-component="true"
            >
                <path
                    d="M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547C20.709 21.637 24 17.324 24 12.25 24 5.896 18.854.75 12.5.75Z"
                ></path>
            </svg>
        </a>

        <a
            href="https://linkedin.com/in/brian-douglas-90abb93ab"
            class="linkedin"
        >
            <svg
                viewBox="0 0 128 128"
                height="32"
                aria-hidden="true"
                width="32"
                data-view-component="true"
            >
                <path
                    d="M116 3H12a8.91 8.91 0 00-9 8.8v104.42a8.91 8.91 0 009 8.78h104a8.93 8.93 0 009-8.81V11.77A8.93 8.93 0 00116 3zM39.17 107H21.06V48.73h18.11zm-9-66.21a10.5 10.5 0 1110.49-10.5 10.5 10.5 0 01-10.54 10.48zM107 107H88.89V78.65c0-6.75-.12-15.44-9.41-15.44s-10.87 7.36-10.87 15V107H50.53V48.73h17.36v8h.24c2.42-4.58 8.32-9.41 17.13-9.41C103.6 47.28 107 59.35 107 75z"
                ></path>
            </svg>
        </a>
    </div>
</header>

            <div class="breadcrumbs">
                <a href="/">Home</a> / <span>Handle Spring form errors with JTE</span>
            </div>

            <main>
                <article class="post">
                    <header>
                        <h1>Handle Spring form errors with JTE</h1>
                        <time datetime="17/06/2025"
                            >June 17th, 2025</time
                        >
                    </header>

                    <div class="body"><p>I've been working with JTE (Java Template Engine) templates in my latest Spring app. They are a joy to work with and
feel like a more <em>modern</em> alternative to Thymeleaf templates. With Spring however there are some integrations that a
Thymeleaf user would expect, that are missing when using JTE. Automatic form error association being one. So I have
documented how to pass form errors to your jte templates below.</p>
<!-- more -->
<h2 id="theproblem">The problem</h2>
<p>Let's say we have a <code>RegistrationForm</code> class, that has various validator annotations. When one of these validators fails
we expect the <code>RegistrationController</code> to return the registration form view with the errors present, such as the below
example.</p>
<pre class="java language-java"><code class="hljs java language-java"><span class="hljs-meta">@Controller</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@RequestMapping(&quot;/register&quot;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegistrationController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FORM_VIEW</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;auth/register&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ATTR_PAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;page&quot;</span>;

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">showRegisterForm</span><span class="hljs-params">(Model model)</span> {
        model.addAttribute(ATTR_PAGE, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-string">&quot;Register&quot;</span>));
        model.addAttribute(ATTR_REGISTRATION_FORM, <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegistrationForm</span>());
        <span class="hljs-keyword">return</span> FORM_VIEW;
    }

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">processRegisterForm</span><span class="hljs-params">(<span class="hljs-meta">@ModelAttribute</span> <span class="hljs-meta">@Validated</span> RegistrationForm registrationForm,
                                      BindingResult result,
                                      Model model)</span> {

        model.addAttribute(ATTR_PAGE, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-string">&quot;Register&quot;</span>));
        model.addAttribute(ATTR_REGISTRATION_FORM, registrationForm);

        <span class="hljs-keyword">if</span> (result.hasErrors()) {
            <span class="hljs-keyword">return</span> FORM_VIEW;
        }

        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<p>In the above example, when the <code>BindingResult</code> has errors the user is taken back to the registration form page. If we
were using Thymeleaf, the validation errors would be auto attached to the view and can be rendered with special syntax.</p>
<p><magpie-trinket>You can read more about how Thymeleaf handles form errors
at <a href="https://www.baeldung.com/spring-thymeleaf-error-messages">spring-thymeleaf-error-messages</a></magpie-trinket></p>
<p>Jte does not support this type of integration. This is a good thing, as it allows the developer to handle the form field
validation how they see fit. Before I go into how I bind the form errors via the controller, here is the
<code>RegistrationForm</code> class.</p>
<pre class="java language-java"><code class="hljs java language-java"><span class="hljs-meta">@Getter</span>
<span class="hljs-meta">@Setter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegistrationForm</span> {
    <span class="hljs-meta">@NotBlank(message = &quot;Email address is required&quot;)</span>
    <span class="hljs-meta">@Email(message = &quot;Invalid email format&quot;)</span>
    <span class="hljs-keyword">private</span> String email;

    <span class="hljs-meta">@NotBlank(message = &quot;Password is required&quot;)</span>
    <span class="hljs-meta">@Size(min = 8, max = 250, message = &quot;Password must be a minimum of 8 characters in length&quot;)</span>
    <span class="hljs-keyword">private</span> String password;
    <span class="hljs-meta">@NotBlank(message = &quot;Confirm password is required&quot;)</span>
    <span class="hljs-keyword">private</span> String confirmPassword;

    <span class="hljs-meta">@NotBlank(message = &quot;First name is required&quot;)</span>
    <span class="hljs-meta">@Size(min = 1, message = &quot;First name must be between 1 and 50 characters in length&quot;)</span>
    <span class="hljs-keyword">private</span> String firstName;

    <span class="hljs-meta">@NotBlank(message = &quot;Last name is required&quot;)</span>
    <span class="hljs-meta">@Size(min = 3, message = &quot;Last name must be between 3 and 50 characters in length&quot;)</span>
    <span class="hljs-keyword">private</span> String lastName;
}
</code></pre>
<p>From this you can guess that when there is an email format issue we want to show the appropriate message to our user on
the frontend. Naturally this is the case for all the other fields also. Here is how I render the error message in the
jte template.</p>
<pre class="html language-html"><code class="hljs html language-html">@param ValidationHelper validation
@param RegistrationForm registrationForm

@if(validation.hasErrors())
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-error&quot;</span>&gt;</span>Please correct the following errors to proceed.<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
@endif

<span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Email Address
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;${registrationForm.getEmail()}&quot;</span> <span class="hljs-attr">required</span>&gt;</span>
    @if(validation.hasError(&quot;email&quot;))
        <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;error-text&quot;</span>&gt;</span>${validation.getError(&quot;email&quot;).getDefaultMessage()}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
    @endif
<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
</code></pre>
<p><chicken-asks>But wait! where is the <code>ValidationHelper</code> coming from?</chicken-asks>
<magpie-replies>Eagle eyed again, he shows us how to add it below</magpie-replies></p>
<p>You'll notice that I have added a <code>ValidationHelper</code> param. I will show you how this is implemented below. But as you
can see, we are going to use this to render our form errors. The api should be self-explanatory <code>hasErrors</code>, tells us
if there are any errors present, <code>hasError</code> tells us if a specific error is present, and <code>getError</code> give us the details
of the specific error.</p>
<h2 id="validationhelper">ValidationHelper</h2>
<p>The <code>ValidationHelper</code> class itself is just a wrapper around the <code>BindingResult</code> which we will pass in via the
controller. I've added the <code>@NoArgsConstructor</code> so that is can be instantiated without a <code>BindingResult</code>. The null
checks mean that this is safe to use when a <code>BindingResult</code> is not present.</p>
<pre class="java language-java"><code class="hljs java language-java"><span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidationHelper</span> {
    <span class="hljs-keyword">private</span> BindingResult bindingResult;

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasErrors</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> bindingResult != <span class="hljs-literal">null</span> &amp;&amp; bindingResult.hasErrors();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasError</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> bindingResult != <span class="hljs-literal">null</span> &amp;&amp; bindingResult.hasFieldErrors(name);
    }

    <span class="hljs-keyword">public</span> List&lt;FieldError&gt; <span class="hljs-title function_">getErrors</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (bindingResult == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> Collections.emptyList();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> bindingResult.getFieldErrors();
        }
    }

    <span class="hljs-keyword">public</span> FieldError <span class="hljs-title function_">getError</span><span class="hljs-params">(String fieldName)</span> {
        <span class="hljs-keyword">if</span> (bindingResult == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> bindingResult.getFieldError(fieldName);
        }
    }
}
</code></pre>
<p>The updated <code>RegistrationController</code> is below. The example registration form jte template does not need to be updated.</p>
<pre class="java language-java"><code class="hljs java language-java"><span class="hljs-meta">@Controller</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@RequestMapping(&quot;/register&quot;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegistrationController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FORM_VIEW</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;auth/register&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ATTR_PAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;page&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ATTR_VALIDATION</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;validation&quot;</span>;

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">showRegisterForm</span><span class="hljs-params">(Model model)</span> {
        model.addAttribute(ATTR_PAGE, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-string">&quot;Register&quot;</span>));
        model.addAttribute(ATTR_REGISTRATION_FORM, <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegistrationForm</span>());
        model.addAttribute(ATTR_VALIDATION, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationHelper</span>());
        <span class="hljs-keyword">return</span> FORM_VIEW;
    }

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">processRegisterForm</span><span class="hljs-params">(<span class="hljs-meta">@ModelAttribute</span> <span class="hljs-meta">@Validated</span> RegistrationForm registrationForm,
                                      BindingResult result,
                                      Model model)</span> {

        model.addAttribute(ATTR_PAGE, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-string">&quot;Register&quot;</span>));
        model.addAttribute(ATTR_REGISTRATION_FORM, registrationForm);
        model.addAttribute(ATTR_VALIDATION, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationHelper</span>(result));

        <span class="hljs-keyword">if</span> (result.hasErrors()) {
            <span class="hljs-keyword">return</span> FORM_VIEW;
        }

        <span class="hljs-comment">// ...</span>
    }
}
</code></pre></div>

                    <footer>
                        <p><i>Until next time,</i></p>
                        <p><i>Brian</i></p>
                    </footer>
                </article>
            </main>

            <footer class="site-footer">
    <p>
        <small>Since August 4th, 2023. All words by Brian
            Douglas. <a href="mailto:brianwdouglas@proton.me">Have a comment?</a></small>
    </p>
</footer>

        </div>

        <script src="/scripts/chicken-and-magpie.js"></script>
        <script src="/scripts/skip-to-section.js"></script>
    </body>
</html>
